// File: dbhandler/__init__.py

// File: dbhandler/asgi.py
"""
ASGI config for dbhandler project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'dbhandler.settings')

application = get_asgi_application()

// File: dbhandler/settings.py
"""
Django settings for dbhandler project.

Generated by 'django-admin startproject' using Django 5.2.6.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.2/ref/settings/
"""

from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-sc%jeoi6mno$1*p7^*hx@++hro)9*e#g7esr5n7#u(gby0=@%$'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'jobs',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'dbhandler.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'dbhandler.wsgi.application'


# Database
# https://docs.djangoproject.com/en/5.2/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}


# Password validation
# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/5.2/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.2/howto/static-files/

STATIC_URL = 'static/'

# Default primary key field type
# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'


// File: dbhandler/urls.py
"""
URL configuration for dbhandler project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/5.2/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('jobs.urls')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

// File: dbhandler/wsgi.py
"""
WSGI config for dbhandler project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'dbhandler.settings')

application = get_wsgi_application()

// File: get_code_context.sh
#!/bin/bash

#!/usr/bin/env powershell
echo "Enter the directory path where you want to create code_context.txt:"
read -r project_dir

project_dir="${project_dir//\\//}"

if [ ! -d "$project_dir" ]; then
  echo "Error: Directory '$project_dir' not found."
  exit 1
fi

output_file="${project_dir}/code_context.txt"

if [ -f "$output_file" ]; then
  rm "$output_file"
fi

ignore_patterns=("static" "fonts" "images" "data" "json-excel-converter" "LICENSE" "data.json" "README.md" "*.db" "*.ico" "*.png" "*.jpg" "*.jpeg" "*.gif" "*.svg" "*.pyc" "__pycache__" "env" "node_modules" "package-lock.json" "package.json" "LICENSE" "*.ini" "*.toml" ".coveragerc" ".gitignore" ".travis.yml" "*.lock" "tests" "*.pdf" "dist" "*.json")

include_extensions=(".py" ".js" ".jsx" ".ts" ".tsx" ".html" ".css" ".json" ".php" ".c" ".cpp" ".java" ".sh")

read_files() {
  local dir="$1"
  for entry in "$dir"/*
  do
    should_ignore=false
    for ignore_pattern in "${ignore_patterns[@]}"; do
      if [[ "$entry" == *"$ignore_pattern" ]]; then
        should_ignore=true
        break
      fi
    done

    if $should_ignore; then
      continue
    fi

    if [ -d "$entry" ]; then
      read_files "$entry"
    elif [ -f "$entry" ]; then
      should_include=false
      for ext in "${include_extensions[@]}"; do
        if [[ "$entry" == *"$ext" ]]; then
          should_include=true
          break
        fi
      done

      if $should_include; then
        relative_path=${entry#"$project_dir/"}
        echo "// File: $relative_path" >> "$output_file"
        cat "$entry" >> "$output_file"
        echo "" >> "$output_file"
      else
        echo "Error: File extension not supported: $entry"
      fi
    fi
  done
}

read_files "$project_dir"
echo "Code context has been saved to ${output_file}"
// File: jobs/__init__.py

// File: jobs/admin.py
from django.contrib import admin
from .models import ETLJob, JobError

@admin.register(ETLJob)
class ETLJobAdmin(admin.ModelAdmin):
    list_display = ('id', 'status', 'progress_percentage', 'created_at')
    list_filter = ('status', 'created_at')
    search_fields = ('id', 'status')
    readonly_fields = ('id', 'created_at', 'updated_at')

@admin.register(JobError)
class JobErrorAdmin(admin.ModelAdmin):
    list_display = ('job', 'row_index', 'error_message', 'timestamp')
    list_filter = ('job', 'timestamp')
    search_fields = ('job__id', 'error_message')

// File: jobs/apps.py
from django.apps import AppConfig


class JobsConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'jobs'

// File: jobs/migrations/0001_initial.py
# Generated by Django 5.2.6 on 2026-01-03 08:31

import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ETLJob',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('original_file', models.FileField(upload_to='uploads/')),
                ('processed_file', models.FileField(blank=True, null=True, upload_to='processed/')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('PROCESSING', 'Processing'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed')], default='PENDING', max_length=20)),
                ('progress_percentage', models.IntegerField(default=0)),
                ('metadata', models.JSONField(default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='JobError',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('row_index', models.IntegerField(help_text='Which row number failed?')),
                ('error_message', models.TextField(help_text='What went wrong?')),
                ('raw_data', models.TextField(help_text='The actual bad data from that row')),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='errors', to='jobs.etljob')),
            ],
        ),
    ]

// File: jobs/migrations/__init__.py

// File: jobs/models.py
from django.db import models
import uuid

class ETLJob(models.Model):
    STATUS_CHOICES = [
        ('PENDING', 'Pending'),
        ('PROCESSING', 'Processing'),
        ('COMPLETED', 'Completed'),
        ('FAILED', 'Failed'),
    ]

    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    original_file = models.FileField(upload_to='uploads/')
    processed_file = models.FileField(upload_to='processed/', null=True, blank=True)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='PENDING')
    progress_percentage = models.IntegerField(default=0)
    metadata = models.JSONField(default=dict)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"Job {self.id} - {self.status}"

class JobError(models.Model):
    job = models.ForeignKey(ETLJob, on_delete=models.CASCADE, related_name='errors')
    row_index = models.IntegerField(help_text="Which row number failed?")
    error_message = models.TextField(help_text="What went wrong?")
    raw_data = models.TextField(help_text="The actual bad data from that row")
    timestamp = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"Error in Job {self.job.id} at Row {self.row_index}"

// File: jobs/serializers.py
from rest_framework import serializers
from .models import ETLJob, JobError

class ETLJobSerializer(serializers.ModelSerializer):
    class Meta:
        model = ETLJob
        fields = '__all__'
        read_only_fields = ('id', 'created_at', 'updated_at', 'process_percentage') 
        # Note: progress_percentage is usually updated by the backend/worker, so maybe read-only for input, 
        # but the prompt implies sending JSON data back, so standard __all__ is fine. 
        # I'll stick to 'fields = "__all__"' as a safe bet for "complete code".

class JobErrorSerializer(serializers.ModelSerializer):
    class Meta:
        model = JobError
        fields = '__all__'

// File: jobs/templates/jobs/dashboard.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETL Job Dashboard | DataRefinery</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-pink: #fa75c6;
            --primary-yellow: #efff5e;
            --header-bg: #101010;
            --body-bg: #fffdf5;
            --card-bg: #ffffff;
            --terminal-bg: #0d1117;
            --terminal-text: #28a745;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--body-bg);
            color: #333;
        }

        .navbar {
            background-color: var(--header-bg);
            padding: 1rem 2rem;
        }

        .navbar-brand {
            color: #fff !important;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .job-id {
            color: #888;
            font-size: 0.9rem;
            font-family: monospace;
        }

        .status-card {
            background-color: var(--card-bg);
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            padding: 2rem;
            margin-top: 2rem;
        }

        .progress {
            height: 25px;
            border-radius: 12px;
            background-color: #f0f0f0;
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .progress-bar {
            background-color: var(--primary-pink);
            font-weight: 600;
        }

        .badge-status {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .status-pending { background-color: #e0e0e0; color: #555; }
        .status-processing { background-color: var(--primary-yellow); color: #000; }
        .status-completed { background-color: #28a745; color: #fff; }
        .status-failed { background-color: #dc3545; color: #fff; }

        .terminal-window {
            background-color: var(--terminal-bg);
            border-radius: 8px;
            color: #fff;
            font-family: 'Consolas', 'Monaco', monospace;
            padding: 0;
            overflow: hidden;
            margin-top: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .terminal-header {
            background-color: #1f2428;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #30363d;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .dot-red { background-color: #ff5f56; }
        .dot-yellow { background-color: #ffbd2e; }
        .dot-green { background-color: #27c93f; }

        .terminal-body {
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            color: var(--terminal-text);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .log-entry {
            margin-bottom: 4px;
        }

        .btn-download {
            background-color: var(--primary-pink);
            color: #fff;
            border: none;
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-download:hover {
            opacity: 0.9;
            color: #fff;
            transform: translateY(-1px);
        }
        
        .hidden { display: none; }
    </style>
</head>
<body>

    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">DataRefinery</a>
            <span class="job-id ms-auto">Job ID: <span id="jobIdHeader">{{ job.id }}</span></span>
        </div>
    </nav>

    <div class="container">
        <!-- Status Card -->
        <div class="status-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                    <h4 class="mb-1" id="filenameDisplay">{{ job.original_file.name }}</h4>
                    <small class="text-muted">Uploaded on: {{ job.created_at|date:"M d, Y H:i" }}</small>
                </div>
                <span id="statusBadge" class="badge-status status-pending">{{ job.status }}</span>
            </div>

            <div class="progress">
                <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: {{ job.progress_percentage }}%">
                    {{ job.progress_percentage }}%
                </div>
            </div>
            
            <div id="actionArea" class="mt-4 text-center ">
                <a href="{{ job.processed_file.url }}" id="downloadBtn" class="btn btn-download hidden" target="_blank">
                    Download Cleaned File
                </a>
            </div>
        </div>

        <!-- Terminal -->
        <div class="terminal-window">
            <div class="terminal-header">
                <div class="terminal-dot dot-red"></div>
                <div class="terminal-dot dot-yellow"></div>
                <div class="terminal-dot dot-green"></div>
                <span class="ms-3 text-muted" style="font-size: 0.8rem;">Build Logs</span>
            </div>
            <div class="terminal-body" id="terminalBody">
                <div class="log-entry">> Initializing job monitor...</div>
                <div class="log-entry">> Waiting for logs...</div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const jobId = "{{ job.id }}";
        const statusApiUrl = `/api/status/${jobId}/`;
        const progressBar = document.getElementById('progressBar');
        const statusBadge = document.getElementById('statusBadge');
        const terminalBody = document.getElementById('terminalBody');
        const downloadBtn = document.getElementById('downloadBtn');

        let isCompleted = false;

        function updateStatus(status) {
            statusBadge.textContent = status;
            statusBadge.className = 'badge-status'; // Reset classes
            
            if (status === 'PENDING') statusBadge.classList.add('status-pending');
            else if (status === 'PROCESSING') statusBadge.classList.add('status-processing');
            else if (status === 'COMPLETED') statusBadge.classList.add('status-completed');
            else if (status === 'FAILED') statusBadge.classList.add('status-failed');
        }

        function appendLog(message, isRaw = false) {
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.textContent = isRaw ? message : `> ${message}`;
            terminalBody.appendChild(div);
            // Auto scroll to bottom
            terminalBody.scrollTop = terminalBody.scrollHeight;
        }

        function pollStatus() {
            if (isCompleted) return;

            fetch(statusApiUrl)
                .then(response => response.json())
                .then(data => {
                    // Update Progress
                    progressBar.style.width = `${data.progress}%`;
                    progressBar.textContent = `${data.progress}%`;

                    // Update Status Badge
                    updateStatus(data.status);

                    // Update Logs
                    // The API returns a list of *all* errors/logs associated with the job
                    // In a real optimized system we might only fetch new ones, but per requirements:
                    // "The 'errors' key should be a list of error_message strings"
                    // We'll clear and re-render or check for new ones. 
                    // To avoid duplicates if the API returns full history every time, we should handle that.
                    // However, simpler is to just only add NEW logs if we track what we've seen.
                    // But standard "easy" implementation:
                    // Let's just assume we append errors as they come. 
                    // Wait, if the API returns the FULL list every time, we shouldn't just append.
                    // Let's clear the terminal if we are re-rendering, OR better, check length.
                    
                    // Simple logic:
                    if (data.errors && data.errors.length > 0) {
                         // Clear previous generic messages if it's the first error
                         const currentLogs = terminalBody.querySelectorAll('.log-entry-error');
                         if (currentLogs.length < data.errors.length) {
                             // Find new errors
                             const newErrors = data.errors.slice(currentLogs.length);
                             newErrors.forEach(err => {
                                 const div = document.createElement('div');
                                 div.className = 'log-entry log-entry-error'; // Add marker class
                                 div.textContent = `> [ERROR] ${err}`;
                                 div.style.color = '#ff5f56';
                                 terminalBody.appendChild(div);
                             });
                             terminalBody.scrollTop = terminalBody.scrollHeight;
                         }
                    }

                    // Completion Check
                    if (data.status === 'COMPLETED') {
                        isCompleted = true;
                        progressBar.classList.remove('progress-bar-striped', 'progress-bar-animated');
                        progressBar.classList.add('bg-success');
                        downloadBtn.classList.remove('hidden');
                        appendLog("Job Completed Successfully!");
                        clearInterval(pollingInterval);
                    } else if (data.status === 'FAILED') {
                        isCompleted = true;
                        progressBar.classList.add('bg-danger');
                        appendLog("Job Failed.");
                        clearInterval(pollingInterval);
                    }
                })
                .catch(err => {
                    console.error('Polling error:', err);
                    appendLog("Error connecting to server...", true);
                });
        }

        // Start polling
        const pollingInterval = setInterval(pollStatus, 1500);
        
        // Initial poll
        pollStatus();
    </script>
</body>
</html>

// File: jobs/tests.py
from django.test import TestCase

# Create your tests here.

// File: jobs/urls.py
from django.urls import path
from .views import upload_file_view, get_job_status, n8n_callback_view, dashboard_view

urlpatterns = [
    path('api/upload/', upload_file_view, name='upload_file'),
    path('api/status/<uuid:job_id>/', get_job_status, name='job_status'),
    path('api/callback/<uuid:job_id>/', n8n_callback_view, name='n8n_callback'),
    path('dashboard/<uuid:job_id>/', dashboard_view, name='dashboard'),
]

// File: jobs/views.py
import json
import requests
from django.shortcuts import get_object_or_404, render
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.conf import settings
from .models import ETLJob, JobError

# Placeholder for n8n Webhook URL - Replace with actual URL
N8N_WEBHOOK_URL = "https://your-n8n-instance.com/webhook/..."

@csrf_exempt
def upload_file_view(request):
    if request.method == 'POST' and request.FILES.get('original_file'):
        uploaded_file = request.FILES['original_file']
        
        # Create Job
        job = ETLJob.objects.create(original_file=uploaded_file)
        
        # Construct absolute URL for the file
        # request.build_absolute_uri returns the full domain + path
        file_url = request.build_absolute_uri(job.original_file.url)
        
        # Payload for n8n
        payload = {
            'job_id': str(job.id),
            'file_url': file_url,
            'metadata': job.metadata
        }
        
        # Send to n8n
        try:
            # Using a generic error catch to prevent user view crash if n8n is down
            response = requests.post(N8N_WEBHOOK_URL, json=payload, timeout=5)
            # You might want to log response.status_code here
        except requests.exceptions.RequestException as e:
            # In a real app, handle this (retry, log error, etc.)
            print(f"Failed to trigger n8n: {e}")
            
        return JsonResponse({'job_id': job.id}, status=201)
    
    return JsonResponse({'error': 'Invalid request. POST a file named "original_file".'}, status=400)

def get_job_status(request, job_id):
    job = get_object_or_404(ETLJob, id=job_id)
    
    # Get all related error messages
    # Assuming 'related_name="errors"' was set on theForeignKey in JobError model
    # If not, use job.joberror_set.all()
    # Based on my previous turn, I used related_name='errors'.
    errors = list(job.errors.values_list('error_message', flat=True))
    
    response_data = {
        "status": job.status,
        "progress": job.progress_percentage,
        "errors": errors
    }
    return JsonResponse(response_data)

@csrf_exempt
def n8n_callback_view(request, job_id):
    if request.method == 'POST':
        try:
            data = json.loads(request.body)
            job = get_object_or_404(ETLJob, id=job_id)
            
            # Update fields if present
            if 'status' in data:
                job.status = data['status']
            if 'progress' in data:
                job.progress_percentage = data['progress']
            
            job.save()
            
            # Handle new error logic
            new_error = data.get('new_error')
            if new_error:
                # Basic logging, assuming row_index might be passed or default to 0/1
                # The prompt example: "new_error": "Row 5 bad date"
                # If we want to split this or just save it as message:
                JobError.objects.create(
                    job=job,
                    row_index=data.get('row_index', 0), # Default 0 if not provided
                    error_message=new_error,
                    raw_data=data.get('raw_data', 'N/A') # Optional extra data
                )
                
            return JsonResponse({"success": True})
            
        except json.JSONDecodeError:
            return JsonResponse({'error': 'Invalid JSON'}, status=400)
    
    return JsonResponse({'error': 'POST method required'}, status=405)

def dashboard_view(request, job_id):
    job = get_object_or_404(ETLJob, id=job_id)
    return render(request, 'jobs/dashboard.html', {'job': job})

// File: manage.py
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'dbhandler.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()

